{
    "description":"example commerce event schema",
    "$schema":"http://json-schema.org/draft-07/schema#",
    "properties":{
       "data":{
          "properties":{
              "custom_attributes":{
                "properties":{
                    "foo":{
                       "type":"string"
                    }
                 },
                 "required":[
                    "foo"
                 ]
              },
             "product_action":{
                "properties":{
                   "action":{
                      "type":"string",
                      "const":"purchase"
                   },
                   "total_amount":{
                      "$ref":"#/definitions/Number"
                   },
                   "transaction_id":{
                    "$ref":"#/definitions/Number"
                   },
                   "products":{
                      "type":[
                         "array",
                         "null"
                      ],
                      "items":{
                         "properties":{
                            "id":{
                               "type":"string"
                            },
                            "name":{
                               "type":"string"
                            }
                         },
                         "required":[
                            "id",
                            "name"
                         ]
                      }
                   }
                },
                "required":[
                   "action",
                   "transaction_id",
                   "total_amount"
                ]
             }
          }
       },
       "event_type":{
          "type":"string",
          "const":"commerce_event"
       }
    },
    "definitions":{
       "Number":{
          "type":"string",
          "pattern":"^[0-9]*$"
       }
    }
 }